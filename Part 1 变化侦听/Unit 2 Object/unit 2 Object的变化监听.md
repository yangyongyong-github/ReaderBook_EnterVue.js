
# unit 2 Object的变化监听

*大部分人不会想到object和Array会采用不同的侦测方式*

> 运行应用程序时，如何检测状态发生了变化？
变化侦听，两种类型：推push 和拉 pull

+ angular和react的变化侦听都属于拉pull：
当状态发生变化时，它不知道那个状态变了，只知道状态可能变了，然后回发送一个信号告诉框架，框架内部收到信号后，回机型一个暴力比对来找出哪些DOM节点需要重新渲染。
  - 在ang中**脏检查的流程**，在react中是**虚拟DOM**。

+ 而vue的变化属于“推”push，
当状态发生变化时，vue立刻就知道了，而且一定程度上知道哪些变化，因此它知道的信息更多，也就可以进行粒度更细的更新。

vue之所以随意调整粒度，本质上还是归功于变化侦测。推类可以随意调整粒度。


## 2.2 如何追踪变化？
JS `Object.defineProperty` `Proxy`
考虑到ES6在浏览器中地支持情况（兼容性），vue2使用前者

## 2.3 如何收集依赖？

[[definePropertty.js]]


## 2.5 收集谁（当属性发生变化后，通知谁？）
数据被用到的地方，很多还类型不一致（模板，watch），这时需要抽象出一个能集中处理这些情况的类watcher
[[Watcher.js]]

Watcher 中介的角色，数据发生变化后通知他，它再通知其他数据被用到的地方
// keypath
vm.$watch('a.b.b', fucntion (newVal, oldVal){
  // do something ...
})
当属性data,a.b.c属性发生变化后，触发第二个参数中的函数










